@page
@model BSMS.WebApp.Pages.Auth.ForgotPasswordModel
@{
    ViewData["Title"] = "Forgot Password - BSMS";
}

<link rel="stylesheet" href="~/css/auth.css" />

<div class="auth-container">
    <!-- Background Pattern -->
    <div class="pattern-overlay"></div>

    <div class="auth-wrapper">
        <!-- Forgot Password Card -->
        <div class="auth-card">
            @if (!Model.EmailSent)
            {
                <h2 class="auth-title">Forgot Password?</h2>
                <p class="auth-subtitle">No worries! Enter your email and we'll send you reset instructions.</p>

                <form method="post" class="auth-form">
                    <!-- Email Field -->
                    <div class="form-group">
                        <label asp-for="Input.Email" class="form-label">Email Address</label>
                        <div class="input-wrapper">
                            <input asp-for="Input.Email" class="form-input" type="email" placeholder="Enter your email address" autofocus />
                            <svg class="input-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <span asp-validation-for="Input.Email" class="text-danger small"></span>
                    </div>

                    <!-- Reset Button -->
                    <button type="submit" class="auth-button">
                        <span class="button-text">Send Reset Link</span>
                        <svg class="button-icon" width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </button>

                    <!-- Divider -->
                    <div class="divider">
                        <span class="divider-text">OR</span>
                    </div>

                    <!-- Back to Login Link -->
                    <div class="auth-footer">
                        Remember your password? <a asp-page="/Auth/Login" class="auth-link">Back to login</a>
                    </div>
                </form>
            }
            else
            {
                <div style="text-align: center;">
                    <!-- Success Icon -->
                    <svg width="64" height="64" fill="none" stroke="#00C853" viewBox="0 0 24 24" style="margin: 0 auto 20px;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>

                    <h2 class="auth-title">Check Your Email</h2>
                    <p class="auth-subtitle">
                        If an account exists with the email <strong>@Model.Input.Email</strong>, 
                        you will receive password reset instructions shortly.
                    </p>

                    <div style="margin-top: 32px;">
                        <a asp-page="/Auth/Login" class="auth-button" style="display: inline-flex; text-decoration: none;">
                            <span class="button-text">Back to Login</span>
                            <svg class="button-icon" width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"/>
                            </svg>
                        </a>
                    </div>

                    <div class="divider" style="margin: 24px 0;">
                        <span class="divider-text">NEED HELP?</span>
                    </div>

                    <div class="auth-footer">
                        Didn't receive the email? Check your spam folder or 
                        <a asp-page="/Auth/ForgotPassword" class="auth-link">try again</a>
                    </div>
                </div>
            }
        </div>

        <!-- Battery Icon Accent -->
        <div class="battery-accent">
            <svg viewBox="0 0 80 120" xmlns="http://www.w3.org/2000/svg">
                <rect x="15" y="20" width="50" height="75" rx="3" fill="none" stroke="#00C853" stroke-width="1.5" opacity="0.3" />
                <rect x="22" y="15" width="10" height="6" fill="#00C853" opacity="0.2" rx="1" />
                <rect x="48" y="15" width="10" height="6" fill="#00C853" opacity="0.2" rx="1" />
            </svg>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
